{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import*as React from\"react\";import style from\"./Login.module.css\";import Snackbar from\"@mui/material/Snackbar\";import TextField from\"@mui/material/TextField\";import MuiAlert from\"@mui/material/Alert\";import Button from\"@mui/material/Button\";import{useForm}from\"react-hook-form\";import{validator}from\"../validator\";import{authenticate}from\"../../../redux/actions/actions\";import{useDispatch,useSelector}from'react-redux';import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Alert=/*#__PURE__*/React.forwardRef(function Alert(props,ref){return/*#__PURE__*/_jsx(MuiAlert,_objectSpread({elevation:6,ref:ref,variant:\"filled\"},props));});var Login=function Login(){var _errors$email,_errors$password;var navigate=useNavigate();var authState=useSelector(function(state){return state.authState;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var dispatch=useDispatch();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;useEffect(function(){if(authState.isLoggedIn){return navigate(\"/home\");}},[authState.isLoggedIn]);var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var statusLogin;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(authenticate(data));case 2:statusLogin=_context.sent;if(statusLogin===404||statusLogin===400)setOpen(true);case 4:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ingresar\"}),/*#__PURE__*/_jsx(\"div\",{className:style.inputContainer,children:/*#__PURE__*/_jsx(TextField,_objectSpread({label:\"Email\",type:\"text\",variant:\"filled\",placeholder:\"user@email.com\",name:\"email\",error:errors.email?true:false,helperText:validator((_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.type,\"email\")},register(\"email\",{required:true,pattern:/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/})))}),/*#__PURE__*/_jsx(\"div\",{className:style.inputContainer,children:/*#__PURE__*/_jsx(TextField,_objectSpread({label:\"Password\",type:\"password\",variant:\"filled\",error:errors.password?true:false,helperText:validator((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.type),placeholder:\"password\",name:\"password\"},register(\"password\",{required:true})))}),/*#__PURE__*/_jsxs(\"div\",{className:style.register,children:[\"\\xBFNo tiene una cuenta? \",\" \",/*#__PURE__*/_jsx(Link,{to:\"/users/register\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Registrate ahora\"})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",value:\"Ingresar\",variant:\"contained\",children:\"Ingresar\"}),/*#__PURE__*/_jsx(Snackbar,{open:open,autoHideDuration:5000,onClose:function onClose(){return setOpen(false);},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"Email o contrase\\xF1a erronea\"})})]});};export default Login;","map":{"version":3,"names":["useState","useEffect","React","style","Snackbar","TextField","MuiAlert","Button","useForm","validator","authenticate","useDispatch","useSelector","Link","useNavigate","Alert","forwardRef","props","ref","Login","navigate","authState","state","open","setOpen","dispatch","register","handleSubmit","errors","formState","isLoggedIn","onSubmit","data","statusLogin","inputContainer","email","type","required","pattern","password"],"sources":["C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/src/components/Form/Login/Login.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport * as React from \"react\";\r\nimport style from \"./Login.module.css\";\r\n\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport MuiAlert from \"@mui/material/Alert\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { validator } from \"../validator\";\r\nimport { authenticate } from \"../../../redux/actions/actions\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nconst Alert = React.forwardRef(function Alert(props, ref) {\r\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\r\n});\r\n\r\nconst Login = () => {\r\n  let navigate = useNavigate();\r\n  const authState = useSelector( state => state.authState);\r\n  const [open, setOpen] = useState(false)\r\n  const dispatch = useDispatch();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm();\r\n\r\n  useEffect(() => {\r\n    if (authState.isLoggedIn){\r\n       return navigate(\"/home\");\r\n    }\r\n },[authState.isLoggedIn]);\r\n\r\n  const onSubmit = async (data) => {\r\n    const statusLogin = await dispatch(authenticate(data))\r\n    if(statusLogin === 404 || statusLogin === 400) setOpen(true);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n      <h2>Ingresar</h2>\r\n      <div className={style.inputContainer}>\r\n        <TextField\r\n          label=\"Email\"\r\n          type=\"text\"\r\n          variant=\"filled\"\r\n          placeholder=\"user@email.com\"\r\n          name=\"email\"\r\n          error={errors.email ? true : false}\r\n          helperText={validator(errors.email?.type, \"email\")}\r\n          {...register(\"email\", {\r\n            required: true,\r\n            pattern: /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/,\r\n          })}\r\n        />\r\n      </div>\r\n      <div className={style.inputContainer}>\r\n        <TextField\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          variant=\"filled\"\r\n          error={errors.password ? true : false}\r\n          helperText={validator(errors.password?.type)}\r\n          placeholder=\"password\"\r\n          name=\"password\"\r\n          {...register(\"password\", {\r\n            required: true,\r\n          })}\r\n        />\r\n      </div>\r\n      <div className={style.register}>\r\n        ¿No tiene una cuenta? {\" \"}\r\n        <Link to='/users/register'>\r\n          <strong>Registrate ahora</strong>\r\n        </Link>\r\n      </div>\r\n      <Button type=\"submit\" value=\"Ingresar\" variant=\"contained\">\r\n        Ingresar\r\n      </Button>\r\n      <Snackbar\r\n        open={open}\r\n        autoHideDuration={5000}\r\n        onClose={() => setOpen(false)}\r\n      >\r\n        <Alert severity=\"error\">Email o contraseña erronea</Alert>\r\n      </Snackbar>\r\n\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}