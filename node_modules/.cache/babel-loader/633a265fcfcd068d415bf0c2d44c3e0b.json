{"ast":null,"code":"// export const action = () => async (dispatch) => {}\nimport axios from \"axios\";\nimport { LOADING, GET_USERS_CONTRACTS, GET_WORKER_DETAIL, GET_WORKERS, GET_JOBS, GET_USERS, GET_USERNAME, POST_USER, GET_WORKERS_PREMIUM, LOGIN_SUCCES, GET_WORKERS_SEARCH } from './actions_vars';\nexport function getWorkers() {\n  return function (dispatch) {\n    axios.get(\"http://localhost:3001/workers\").then(workers => workers.data).then(workers => {\n      dispatch({\n        type: GET_WORKERS,\n        payload: workers\n      });\n    }).catch(err => console.log(err));\n  };\n} // export function getContractUsers(ids){\n//   return function(dispatch){\n//     dispatch({ type: LOADING });\n//     return fetch(\"http://localhost:3001/contract/user\",{\n//       method:'GET',\n//       headers: {\n//         'Content-Type': 'application/json'\n//       },\n//       body: JSON.stringify(ids)\n//       })\n//   }\n//   .then(data => data.json())\n//   .then(json => {\n//     dispatch({type:GET_WORKER_DETAIL,payload:json})\n//   })\n// }\n\nexport function getContractUsers(ids) {\n  let ides = ids.reduce((acum, e) => acum + \"&arr=\" + e, \"arr=\");\n  ides = ides.slice(5, ides.length);\n  return function (dispatch) {\n    dispatch({\n      type: LOADING\n    });\n    return fetch(\"http://localhost:3001/contract/user?\" + ides).then(data => {\n      return data.json();\n    }).then(json => {\n      dispatch({\n        type: GET_USERS_CONTRACTS,\n        payload: json\n      });\n    });\n  };\n}\nexport function getWorkerDetail(id) {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING\n    });\n    return fetch(\"http://localhost:3001/worker/\" + id).then(data => {\n      return data.json();\n    }).then(json => {\n      dispatch({\n        type: GET_WORKER_DETAIL,\n        payload: json\n      });\n    });\n  };\n}\nexport function getUsers() {\n  return function (dispatch) {\n    axios.get(\"http://localhost:3001/users\").then(u => {\n      dispatch({\n        type: GET_USERS,\n        payload: u.data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n}\nexport function getUsersName(search) {\n  return function (dispatch) {\n    axios.get(\"http://localhost:3001/users?name=\" + search).then(u => {\n      dispatch({\n        type: GET_USERNAME,\n        payload: u.data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n}\nexport function getWorkersSearch(search) {\n  return function (dispatch) {\n    dispatch({\n      type: GET_WORKERS_SEARCH,\n      payload: search\n    });\n  };\n}\nexport function createUser(payload, jobs) {\n  return async function (dispatch) {\n    const user = await axios.post(\"http://localhost:3001/users\", payload);\n    const user_id = await user.data.ID;\n\n    if (jobs.length) {\n      const worker = {\n        user_id,\n        jobs\n      };\n      const res = await axios.post(\"http://localhost:3001/worker\", worker);\n    }\n\n    dispatch({\n      type: POST_USER\n    });\n    return user;\n  };\n}\nexport function getJobs() {\n  return async function (dispatch) {\n    try {\n      let jobs = await axios.get(\"http://localhost:3001/jobs\");\n      return dispatch({\n        type: GET_JOBS,\n        payload: jobs.data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function getWorkersPremium() {\n  return async function (dispatch) {\n    try {\n      // let premium = await axios.get(\"http://localhost:3001/workers_premium\");\n      return dispatch({\n        type: GET_WORKERS_PREMIUM,\n        payload: premium\n      }); // payload: premium.data\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\nexport function authenticate(credentials) {\n  return async function (dispatch) {\n    try {\n      const res = await axios.post(\"http://localhost:3001/auth\", credentials);\n      const {\n        data\n      } = res;\n      dispatch({\n        type: LOGIN_SUCCES,\n        payload: data\n      });\n    } catch (error) {\n      return error.response.status;\n    }\n  };\n} // Estos son los workers harcodeados, NO DEBE IR A LA MAIN\n\nconst premium = [{\n  nombre: \"Lucas\",\n  lastname: \"Viotti\",\n  img: \"link\",\n  job: \"AlbaÃ±il\",\n  status: \"Online\"\n}, {\n  nombre: \"Feli\",\n  lastname: \"Liziano\",\n  img: \"link\",\n  job: \"Obrero\",\n  status: \"Online\"\n}, {\n  nombre: \"Manuel\",\n  lastname: \"Lokito\",\n  img: \"link\",\n  job: \"Pintor\",\n  status: \"Offline\"\n}, {\n  nombre: \"Guillermo\",\n  lastname: \"Gonzales\",\n  img: \"link\",\n  job: \"Durlero\",\n  status: \"Online\"\n}];","map":{"version":3,"names":["axios","LOADING","GET_USERS_CONTRACTS","GET_WORKER_DETAIL","GET_WORKERS","GET_JOBS","GET_USERS","GET_USERNAME","POST_USER","GET_WORKERS_PREMIUM","LOGIN_SUCCES","GET_WORKERS_SEARCH","getWorkers","dispatch","get","then","workers","data","type","payload","catch","err","console","log","getContractUsers","ids","ides","reduce","acum","e","slice","length","fetch","json","getWorkerDetail","id","getUsers","u","getUsersName","search","getWorkersSearch","createUser","jobs","user","post","user_id","ID","worker","res","getJobs","error","getWorkersPremium","premium","authenticate","credentials","response","status","nombre","lastname","img","job"],"sources":["C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/src/redux/actions/actions.js"],"sourcesContent":["// export const action = () => async (dispatch) => {}\r\nimport axios from \"axios\";\r\nimport {LOADING,GET_USERS_CONTRACTS,GET_WORKER_DETAIL, GET_WORKERS, GET_JOBS, GET_USERS, GET_USERNAME, POST_USER, GET_WORKERS_PREMIUM, LOGIN_SUCCES , GET_WORKERS_SEARCH } from './actions_vars'\r\n\r\nexport function getWorkers() {\r\n    return function (dispatch) {\r\n        axios.get(\"http://localhost:3001/workers\")\r\n            .then(workers => workers.data)\r\n            .then(workers => {\r\n                dispatch({\r\n                    type: GET_WORKERS,\r\n                    payload: workers\r\n                })\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n}\r\n\r\n// export function getContractUsers(ids){\r\n//   return function(dispatch){\r\n//     dispatch({ type: LOADING });\r\n//     return fetch(\"http://localhost:3001/contract/user\",{\r\n//       method:'GET',\r\n//       headers: {\r\n//         'Content-Type': 'application/json'\r\n//       },\r\n//       body: JSON.stringify(ids)\r\n//       })\r\n//   }\r\n//   .then(data => data.json())\r\n//   .then(json => {\r\n//     dispatch({type:GET_WORKER_DETAIL,payload:json})\r\n//   })\r\n// }\r\n\r\nexport function getContractUsers(ids){\r\n\r\n  let ides = ids.reduce((acum,e) => acum+\"&arr=\"+e,\"arr=\")\r\n  ides = ides.slice(5,ides.length)\r\n  return function(dispatch){\r\n    dispatch({ type: LOADING });\r\n    return fetch(\"http://localhost:3001/contract/user?\"+ides)\r\n    .then(data =>{ \r\n      return data.json()})\r\n    .then(json => {\r\n      \r\n      dispatch({type:GET_USERS_CONTRACTS,payload:json})\r\n    })\r\n  }\r\n}\r\n\r\nexport function getWorkerDetail(id){\r\n  \r\n  return function(dispatch){\r\n    \r\n    dispatch({ type: LOADING });\r\n    \r\n    return fetch(\"http://localhost:3001/worker/\"+id)\r\n    .then(data => {\r\n\r\n      return data.json()})\r\n    .then(json => {\r\n      dispatch({type:GET_WORKER_DETAIL,payload:json})\r\n    })\r\n  }\r\n}\r\n\r\nexport function getUsers() {\r\n    return function (dispatch) {\r\n        axios\r\n            .get(\"http://localhost:3001/users\")\r\n            .then((u) => {\r\n                dispatch({\r\n                    type: GET_USERS,\r\n                    payload: u.data,\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    };\r\n}\r\n\r\nexport function getUsersName(search) {\r\n    return function (dispatch) {\r\n        axios\r\n            .get(\"http://localhost:3001/users?name=\" + search)\r\n            .then((u) => {\r\n                dispatch({\r\n                    type: GET_USERNAME,\r\n                    payload: u.data,\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    };\r\n}\r\n\r\nexport function getWorkersSearch(search) {\r\n  return function (dispatch) {    \r\n    dispatch({\r\n      type:GET_WORKERS_SEARCH,\r\n      payload: search\r\n    })\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function createUser(payload, jobs) {\r\n\r\n  return async function (dispatch) {\r\n    const user = await axios.post(\"http://localhost:3001/users\", payload);\r\n    const user_id = await user.data.ID;\r\n    if(jobs.length) {\r\n      const worker = {\r\n        user_id,\r\n        jobs,\r\n\r\n      }\r\n      const res = await axios.post(\"http://localhost:3001/worker\", worker);\r\n    }\r\n\r\n    dispatch({\r\n      type: POST_USER,\r\n    });\r\n    return user;\r\n  };\r\n\r\n}\r\n\r\nexport function getJobs() {\r\n    return async function (dispatch) {\r\n        try {\r\n            let jobs = await axios.get(\"http://localhost:3001/jobs\");\r\n            return dispatch({ type: GET_JOBS, payload: jobs.data });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n}\r\n\r\nexport function getWorkersPremium() {\r\n  return async function (dispatch) {\r\n    try {\r\n      // let premium = await axios.get(\"http://localhost:3001/workers_premium\");\r\n      return dispatch({ type: GET_WORKERS_PREMIUM, payload: premium }); // payload: premium.data\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n}\r\n\r\nexport function authenticate(credentials) {\r\n  return async function (dispatch) {\r\n    try {\r\n      const res = await axios.post(\"http://localhost:3001/auth\", credentials);\r\n      const { data } = res;\r\n      dispatch({ type: LOGIN_SUCCES, payload: data});\r\n    } catch (error) {\r\n      return error.response.status\r\n    }\r\n  };\r\n}\r\n\r\n\r\n// Estos son los workers harcodeados, NO DEBE IR A LA MAIN\r\nconst premium = [\r\n  {\r\n    nombre: \"Lucas\",\r\n    lastname: \"Viotti\",\r\n    img: \"link\",\r\n    job: \"AlbaÃ±il\",\r\n    status: \"Online\"\r\n  },\r\n  {\r\n    nombre: \"Feli\",\r\n    lastname: \"Liziano\",\r\n    img: \"link\",\r\n    job: \"Obrero\",\r\n    status: \"Online\"\r\n  },\r\n  {\r\n    nombre: \"Manuel\",\r\n    lastname: \"Lokito\",\r\n    img: \"link\",\r\n    job: \"Pintor\",\r\n    status: \"Offline\"\r\n  },\r\n  {\r\n    nombre: \"Guillermo\",\r\n    lastname: \"Gonzales\",\r\n    img: \"link\",\r\n    job: \"Durlero\",\r\n    status: \"Online\"\r\n  }\r\n] \r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}