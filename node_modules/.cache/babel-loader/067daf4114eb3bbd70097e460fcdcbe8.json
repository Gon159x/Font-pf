{"ast":null,"code":"import _objectSpread from\"C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{GET_WORKER_CONTRACTS,GET_USER_DETAIL,LOADING,GET_USERS_CONTRACTS,GET_WORKER_DETAIL,GET_WORKERS,GET_JOBS,GET_USERS,GET_USERNAME,POST_USER,GET_WORKERS_PREMIUM,LOGIN_SUCCES,GET_WORKERS_SEARCH,ORDER_BY_RATING,FILTER,RESET,TEMPORAL_LOGOUT,PUT_USER,GET_USER_ID,GET_COUNTRIES}from'../actions/actions_vars';var localStorageAuth=function localStorageAuth(){var auth=localStorage.getItem(\"auth\");if(JSON.parse(auth))return JSON.parse(auth);return{isLoggedIn:false,user:{id:\"\",name:\"\",img:\"\",token:\"\"}};};//Probando\nvar storagedData=localStorageAuth();var initialState={workers:[],users:[],jobs:[],workersPremium:[],authState:storagedData,workerDetail:{},selectedContracts:[],isLoading:false,userDetail:{},allCountries:[],allWorkers:[]};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case GET_USER_DETAIL:return _objectSpread(_objectSpread({},state),{},{userDetail:action.payload,isLoading:false});case LOADING:return _objectSpread(_objectSpread({},state),{},{isLoading:true});case GET_USERS_CONTRACTS:return _objectSpread(_objectSpread({},state),{},{selectedContracts:action.payload,isLoading:false});case GET_WORKER_CONTRACTS:return _objectSpread(_objectSpread({},state),{},{selectedContracts:action.payload,isLoading:false});case GET_WORKER_DETAIL:return _objectSpread(_objectSpread({},state),{},{workerDetail:action.payload,isLoading:false});case GET_USERS:return _objectSpread(_objectSpread({},state),{},{users:action.payload});case GET_USERNAME:return _objectSpread(_objectSpread({},state),{},{users:action.payload});case POST_USER:return _objectSpread({},state);case GET_JOBS:return _objectSpread(_objectSpread({},state),{},{jobs:action.payload});case GET_WORKERS:var workers=action.payload;var totalrating=0;for(var i=0;i<workers.length;i++){totalrating=0;workers[i].Contracts&&workers[i].Contracts.map(function(contract){return totalrating=totalrating+contract.rating_W;});workers[i].rating=totalrating/workers[i].Contracts.length;}return _objectSpread(_objectSpread({},state),{},{workers:action.payload,allWorkers:action.payload});case RESET:return _objectSpread(_objectSpread({},state),{},{workers:state.allWorkers});case GET_WORKERS_PREMIUM:return _objectSpread(_objectSpread({},state),{},{workersPremium:action.payload});case LOGIN_SUCCES:var authState={isLoggedIn:true,user:action.payload};localStorage.setItem('auth',JSON.stringify(authState));return _objectSpread(_objectSpread({},state),{},{authState:authState});case GET_WORKERS:return _objectSpread(_objectSpread({},state),{},{workers:action.payload});case GET_WORKERS_SEARCH:var filtrado=state.workers.filter(function(e){return e.User.name.toLowerCase().includes(action.payload.toLowerCase());});if(filtrado.length===0){filtrado=state.workers.filter(function(c){return c.Jobs.some(function(j){return j.name.toLowerCase().includes(action.payload.toLowerCase());});});}return _objectSpread(_objectSpread({},state),{},{workers:action.payload!==\"\"?filtrado:state.allWorkers});case ORDER_BY_RATING:{return _objectSpread(_objectSpread({},state),{},{workers:action.payload});}case FILTER:{return _objectSpread(_objectSpread({},state),{},{workers:action.payload});}case TEMPORAL_LOGOUT:{var _authState={isLoggedIn:false};localStorage.setItem('auth',JSON.stringify(_authState));return _objectSpread(_objectSpread({},state),{},{authState:_authState});}case GET_USER_ID:return _objectSpread(_objectSpread({},state),{},{users:action.payload});case PUT_USER:{return _objectSpread({},state);}case GET_COUNTRIES:{return _objectSpread(_objectSpread({},state),{},{allCountries:action.payload});}default:return state;}};export default reducer;","map":{"version":3,"names":["GET_WORKER_CONTRACTS","GET_USER_DETAIL","LOADING","GET_USERS_CONTRACTS","GET_WORKER_DETAIL","GET_WORKERS","GET_JOBS","GET_USERS","GET_USERNAME","POST_USER","GET_WORKERS_PREMIUM","LOGIN_SUCCES","GET_WORKERS_SEARCH","ORDER_BY_RATING","FILTER","RESET","TEMPORAL_LOGOUT","PUT_USER","GET_USER_ID","GET_COUNTRIES","localStorageAuth","auth","localStorage","getItem","JSON","parse","isLoggedIn","user","id","name","img","token","storagedData","initialState","workers","users","jobs","workersPremium","authState","workerDetail","selectedContracts","isLoading","userDetail","allCountries","allWorkers","reducer","state","action","type","payload","totalrating","i","length","Contracts","map","contract","rating_W","rating","setItem","stringify","filtrado","filter","e","User","toLowerCase","includes","c","Jobs","some","j"],"sources":["C:/Users/Gon/Desktop/Programacion/P-Grupal/Poyecto-Grupal/client/src/redux/reducer/reducer.js"],"sourcesContent":["\r\nimport {GET_WORKER_CONTRACTS,GET_USER_DETAIL,LOADING,GET_USERS_CONTRACTS,GET_WORKER_DETAIL, GET_WORKERS, GET_JOBS, GET_USERS, GET_USERNAME, POST_USER, GET_WORKERS_PREMIUM, LOGIN_SUCCES , GET_WORKERS_SEARCH, ORDER_BY_RATING, FILTER, RESET, TEMPORAL_LOGOUT, PUT_USER, GET_USER_ID,GET_COUNTRIES } from '../actions/actions_vars'\r\n\r\nconst localStorageAuth = () => {\r\n  const auth = localStorage.getItem(\"auth\");\r\n  if(JSON.parse(auth)) return JSON.parse(auth);\r\n  return { isLoggedIn: false , user: { id : \"\", name : \"\",img: \"\", token: \"\"}}\r\n}\r\n//Probando\r\n\r\nconst storagedData = localStorageAuth();\r\n\r\nconst initialState = {\r\n  workers: [],\r\n  users: [],\r\n  jobs: [],\r\n  workersPremium: [],\r\n  authState: storagedData,\r\n  workerDetail: {},\r\n  selectedContracts: [],\r\n  isLoading: false,\r\n  userDetail: {},\r\n  allCountries: [],\r\n  allWorkers: []\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch(action.type) {\r\n\r\n    case GET_USER_DETAIL:\r\n      return{\r\n        ...state,\r\n        userDetail: action.payload,\r\n        isLoading:false\r\n      }\r\n\r\n    case LOADING:\r\n      return{\r\n        ...state,\r\n        isLoading:true\r\n      }\r\n    case GET_USERS_CONTRACTS:\r\n      return{\r\n        ...state,\r\n        selectedContracts:action.payload,\r\n        isLoading:false\r\n      }\r\n\r\n    case GET_WORKER_CONTRACTS:\r\n      return{\r\n        ...state,\r\n        selectedContracts:action.payload,\r\n        isLoading:false\r\n      }\r\n\r\n    case GET_WORKER_DETAIL:\r\n      return{\r\n        ...state,\r\n        workerDetail: action.payload,\r\n        isLoading:false\r\n      }\r\n    case GET_USERS:\r\n        return {\r\n          ...state,            \r\n          users: action.payload            \r\n        }\r\n    case GET_USERNAME:\r\n      return {\r\n        ...state,        \r\n        users: action.payload\r\n      }\r\n    case POST_USER:\r\n        return {\r\n          ...state\r\n        }\r\n    case GET_JOBS: \r\n      return{\r\n        ...state,\r\n        jobs : action.payload\r\n    }\r\n\r\n    case GET_WORKERS:\r\n      let workers = action.payload\r\n      var totalrating = 0\r\n      for (let i = 0; i < workers.length; i++) {\r\n        totalrating = 0\r\n        workers[i].Contracts && workers[i].Contracts.map(contract => totalrating = totalrating + contract.rating_W)\r\n        workers[i].rating = totalrating / workers[i].Contracts.length\r\n      }\r\n      return {\r\n        ...state,\r\n        workers: action.payload,\r\n        allWorkers: action.payload\r\n}\r\n    case RESET: \r\n    return {\r\n        ...state,\r\n        workers: state.allWorkers\r\n    }\r\n    case GET_WORKERS_PREMIUM:\r\n      return {\r\n        ...state,\r\n      workersPremium: action.payload\r\n      }\r\n    case LOGIN_SUCCES:\r\n      const authState = {\r\n        isLoggedIn: true,\r\n        user: action.payload\r\n      }\r\n\r\n      localStorage.setItem('auth', JSON.stringify(authState));\r\n      return {\r\n        ...state,\r\n        authState\r\n      }\r\n    case GET_WORKERS:\r\n      return {\r\n        ...state,\r\n        workers: action.payload\r\n      }\r\n      case GET_WORKERS_SEARCH:\r\n        let filtrado = state.workers.filter( (e) => e.User.name.toLowerCase().includes(action.payload.toLowerCase()))\r\n        if(filtrado.length === 0) {\r\n          filtrado = state.workers.filter( c => c.Jobs.some( j => j.name.toLowerCase().includes(action.payload.toLowerCase())));\r\n        }\r\n      return {\r\n          ...state,\r\n          workers: action.payload !== \"\" ? filtrado : state.allWorkers\r\n        }\r\n\r\n      case ORDER_BY_RATING:{\r\n        return {\r\n          ...state,\r\n          workers: action.payload\r\n        }\r\n      }\r\n\r\n      case FILTER: {\r\n        return {\r\n          ...state,\r\n          workers: action.payload\r\n        }\r\n      }\r\n\r\n      case TEMPORAL_LOGOUT: {\r\n        const authState = {\r\n          isLoggedIn: false,\r\n        }\r\n  \r\n        localStorage.setItem('auth', JSON.stringify(authState));\r\n        return {\r\n          ...state,\r\n          authState\r\n        }\r\n      }\r\n\r\n      case GET_USER_ID:\r\n      return {\r\n        ...state,\r\n        users: action.payload \r\n      }\r\n    case PUT_USER: {\r\n      return{\r\n        ...state\r\n      }\r\n    }\r\n    case GET_COUNTRIES: {\r\n      return{\r\n        ...state,\r\n        allCountries: action.payload\r\n      }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n\r\nexport default reducer;\r\n"],"mappings":"qJACA,OAAQA,oBAAR,CAA6BC,eAA7B,CAA6CC,OAA7C,CAAqDC,mBAArD,CAAyEC,iBAAzE,CAA4FC,WAA5F,CAAyGC,QAAzG,CAAmHC,SAAnH,CAA8HC,YAA9H,CAA4IC,SAA5I,CAAuJC,mBAAvJ,CAA4KC,YAA5K,CAA2LC,kBAA3L,CAA+MC,eAA/M,CAAgOC,MAAhO,CAAwOC,KAAxO,CAA+OC,eAA/O,CAAgQC,QAAhQ,CAA0QC,WAA1Q,CAAsRC,aAAtR,KAA2S,yBAA3S,CAEA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7B,GAAMC,KAAI,CAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb,CACA,GAAGC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAH,CAAqB,MAAOG,KAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP,CACrB,MAAO,CAAEK,UAAU,CAAE,KAAd,CAAsBC,IAAI,CAAE,CAAEC,EAAE,CAAG,EAAP,CAAWC,IAAI,CAAG,EAAlB,CAAqBC,GAAG,CAAE,EAA1B,CAA8BC,KAAK,CAAE,EAArC,CAA5B,CAAP,CACD,CAJD,CAKA;AAEA,GAAMC,aAAY,CAAGZ,gBAAgB,EAArC,CAEA,GAAMa,aAAY,CAAG,CACnBC,OAAO,CAAE,EADU,CAEnBC,KAAK,CAAE,EAFY,CAGnBC,IAAI,CAAE,EAHa,CAInBC,cAAc,CAAE,EAJG,CAKnBC,SAAS,CAAEN,YALQ,CAMnBO,YAAY,CAAE,EANK,CAOnBC,iBAAiB,CAAE,EAPA,CAQnBC,SAAS,CAAE,KARQ,CASnBC,UAAU,CAAE,EATO,CAUnBC,YAAY,CAAE,EAVK,CAWnBC,UAAU,CAAE,EAXO,CAArB,CAcA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAkC,IAAjCC,MAAiC,2DAAzBb,YAAyB,IAAXc,OAAW,2CAChD,OAAOA,MAAM,CAACC,IAAd,EAEE,IAAK/C,gBAAL,CACE,sCACK6C,KADL,MAEEJ,UAAU,CAAEK,MAAM,CAACE,OAFrB,CAGER,SAAS,CAAC,KAHZ,GAMF,IAAKvC,QAAL,CACE,sCACK4C,KADL,MAEEL,SAAS,CAAC,IAFZ,GAIF,IAAKtC,oBAAL,CACE,sCACK2C,KADL,MAEEN,iBAAiB,CAACO,MAAM,CAACE,OAF3B,CAGER,SAAS,CAAC,KAHZ,GAMF,IAAKzC,qBAAL,CACE,sCACK8C,KADL,MAEEN,iBAAiB,CAACO,MAAM,CAACE,OAF3B,CAGER,SAAS,CAAC,KAHZ,GAMF,IAAKrC,kBAAL,CACE,sCACK0C,KADL,MAEEP,YAAY,CAAEQ,MAAM,CAACE,OAFvB,CAGER,SAAS,CAAC,KAHZ,GAKF,IAAKlC,UAAL,CACI,sCACKuC,KADL,MAEEX,KAAK,CAAEY,MAAM,CAACE,OAFhB,GAIJ,IAAKzC,aAAL,CACE,sCACKsC,KADL,MAEEX,KAAK,CAAEY,MAAM,CAACE,OAFhB,GAIF,IAAKxC,UAAL,CACI,wBACKqC,KADL,EAGJ,IAAKxC,SAAL,CACE,sCACKwC,KADL,MAEEV,IAAI,CAAGW,MAAM,CAACE,OAFhB,GAKF,IAAK5C,YAAL,CACE,GAAI6B,QAAO,CAAGa,MAAM,CAACE,OAArB,CACA,GAAIC,YAAW,CAAG,CAAlB,CACA,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGjB,OAAO,CAACkB,MAA5B,CAAoCD,CAAC,EAArC,CAAyC,CACvCD,WAAW,CAAG,CAAd,CACAhB,OAAO,CAACiB,CAAD,CAAP,CAAWE,SAAX,EAAwBnB,OAAO,CAACiB,CAAD,CAAP,CAAWE,SAAX,CAAqBC,GAArB,CAAyB,SAAAC,QAAQ,QAAIL,YAAW,CAAGA,WAAW,CAAGK,QAAQ,CAACC,QAAzC,EAAjC,CAAxB,CACAtB,OAAO,CAACiB,CAAD,CAAP,CAAWM,MAAX,CAAoBP,WAAW,CAAGhB,OAAO,CAACiB,CAAD,CAAP,CAAWE,SAAX,CAAqBD,MAAvD,CACD,CACD,sCACKN,KADL,MAEEZ,OAAO,CAAEa,MAAM,CAACE,OAFlB,CAGEL,UAAU,CAAEG,MAAM,CAACE,OAHrB,GAKF,IAAKlC,MAAL,CACA,sCACO+B,KADP,MAEIZ,OAAO,CAAEY,KAAK,CAACF,UAFnB,GAIA,IAAKlC,oBAAL,CACE,sCACKoC,KADL,MAEAT,cAAc,CAAEU,MAAM,CAACE,OAFvB,GAIF,IAAKtC,aAAL,CACE,GAAM2B,UAAS,CAAG,CAChBZ,UAAU,CAAE,IADI,CAEhBC,IAAI,CAAEoB,MAAM,CAACE,OAFG,CAAlB,CAKA3B,YAAY,CAACoC,OAAb,CAAqB,MAArB,CAA6BlC,IAAI,CAACmC,SAAL,CAAerB,SAAf,CAA7B,EACA,sCACKQ,KADL,MAEER,SAAS,CAATA,SAFF,GAIF,IAAKjC,YAAL,CACE,sCACKyC,KADL,MAEEZ,OAAO,CAAEa,MAAM,CAACE,OAFlB,GAIA,IAAKrC,mBAAL,CACE,GAAIgD,SAAQ,CAAGd,KAAK,CAACZ,OAAN,CAAc2B,MAAd,CAAsB,SAACC,CAAD,QAAOA,EAAC,CAACC,IAAF,CAAOlC,IAAP,CAAYmC,WAAZ,GAA0BC,QAA1B,CAAmClB,MAAM,CAACE,OAAP,CAAee,WAAf,EAAnC,CAAP,EAAtB,CAAf,CACA,GAAGJ,QAAQ,CAACR,MAAT,GAAoB,CAAvB,CAA0B,CACxBQ,QAAQ,CAAGd,KAAK,CAACZ,OAAN,CAAc2B,MAAd,CAAsB,SAAAK,CAAC,QAAIA,EAAC,CAACC,IAAF,CAAOC,IAAP,CAAa,SAAAC,CAAC,QAAIA,EAAC,CAACxC,IAAF,CAAOmC,WAAP,GAAqBC,QAArB,CAA8BlB,MAAM,CAACE,OAAP,CAAee,WAAf,EAA9B,CAAJ,EAAd,CAAJ,EAAvB,CAAX,CACD,CACH,sCACOlB,KADP,MAEIZ,OAAO,CAAEa,MAAM,CAACE,OAAP,GAAmB,EAAnB,CAAwBW,QAAxB,CAAmCd,KAAK,CAACF,UAFtD,GAKA,IAAK/B,gBAAL,CAAqB,CACnB,sCACKiC,KADL,MAEEZ,OAAO,CAAEa,MAAM,CAACE,OAFlB,GAID,CAED,IAAKnC,OAAL,CAAa,CACX,sCACKgC,KADL,MAEEZ,OAAO,CAAEa,MAAM,CAACE,OAFlB,GAID,CAED,IAAKjC,gBAAL,CAAsB,CACpB,GAAMsB,WAAS,CAAG,CAChBZ,UAAU,CAAE,KADI,CAAlB,CAIAJ,YAAY,CAACoC,OAAb,CAAqB,MAArB,CAA6BlC,IAAI,CAACmC,SAAL,CAAerB,UAAf,CAA7B,EACA,sCACKQ,KADL,MAEER,SAAS,CAATA,UAFF,GAID,CAED,IAAKpB,YAAL,CACA,sCACK4B,KADL,MAEEX,KAAK,CAAEY,MAAM,CAACE,OAFhB,GAIF,IAAKhC,SAAL,CAAe,CACb,wBACK6B,KADL,EAGD,CACD,IAAK3B,cAAL,CAAoB,CAClB,sCACK2B,KADL,MAEEH,YAAY,CAAEI,MAAM,CAACE,OAFvB,GAID,CACD,QACE,MAAOH,MAAP,CAlJJ,CAoJD,CArJD,CAwJA,cAAeD,QAAf"},"metadata":{},"sourceType":"module"}